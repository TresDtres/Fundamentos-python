<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Curso Python Interactivo</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/dracula.min.css">

    <style>
        :root { --bg-color: #f9f9f9; --text-color: #333; --cell-bg-color: white; --cell-border-color: #e0e0e0; --header-border-color: #eaecef; --code-bg-color: #eee; --output-bg-color: #f0f0f0; --output-border-color: #ddd; --button-bg-color: #2c8a30; --button-hover-bg-color: #45a049; --explanation-bg: #f8f9fa; --explanation-border: #4CAF50; }
        [data-theme="dark"] { --bg-color: #121212; --text-color: #e0e0e0; --cell-bg-color: #1e1e1e; --cell-border-color: #333; --header-border-color: #333; --code-bg-color: #333; --output-bg-color: #2a2a2a; --output-border-color: #444; --button-bg-color: #3e8e41; --button-hover-bg-color: #50b154; --explanation-bg: #2c2c2c; }
        [data-theme="retro"] { --bg-color: #000000; --text-color: #00ff00; --cell-bg-color: #0d0d0d; --cell-border-color: #00ff00; --header-border-color: #00ff00; --code-bg-color: #1a1a1a; --output-bg-color: #111; --output-border-color: #008f00; --button-bg-color: #008f00; --button-hover-bg-color: #00ff00; --explanation-bg: #032d03; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; line-height: 1.6; color: var(--text-color); background-color: var(--bg-color); max-width: 800px; margin: 20px auto; padding: 0 15px; }
        .cell { background-color: var(--cell-bg-color); border: 1px solid var(--cell-border-color); border-radius: 8px; margin-bottom: 20px; padding: 15px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .explanation-cell { background-color: var(--explanation-bg); border-left: 4px solid var(--explanation-border); padding: 10px 20px; }
        h1, h2, h3 { border-bottom: 1px solid var(--header-border-color); padding-bottom: 0.3em; }
        .control-button, .run-button { color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; }
        .control-button { background-color: var(--button-bg-color); border: 1px solid var(--cell-border-color); padding: 8px 12px; margin-right: 10px; }
        .run-button { display: inline-block; background-color: var(--button-bg-color); padding: 8px 15px; margin-bottom: 10px; }
        .run-button:hover { background-color: var(--button-hover-bg-color); }
        .output { background-color: var(--output-bg-color); padding: 10px; border-radius: 5px; white-space: pre-wrap; word-wrap: break-word; font-family: "Courier New", Courier, monospace; min-height: 20px; margin-top: 10px; border: 1px solid var(--output-border-color); }
        code { background-color: var(--code-bg-color); color: var(--text-color); padding: 2px 4px; border-radius: 3px; }
        #loading-message { text-align: center; padding: 20px; font-style: italic; }
    </style>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/python/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>
</head>
<body>
    <div class="cell"><h3 style="margin:0;">üé® Opciones de Estilo</h3><button class="control-button" onclick="setTheme('light')">Claro</button><button class="control-button" onclick="setTheme('dark')">Oscuro</button><button class="control-button" onclick="setTheme('retro')">Retro</button></div>
    <div class="cell"><h1>Mini curso: Fundamentos de Programaci√≥n</h1></div>
    <div id="loading-message"><p>‚è≥ Cargando el entorno interactivo de Python...</p></div>

    <div id="content" style="display:none;">
        <!-- Secciones anteriores colapsadas para brevedad -->
        <div class="cell"><h2>1-5. Fundamentos (Variables, Tipos, Operadores, Listas, If)</h2><p>Estas son las lecciones que ya has dominado. ¬°Continuemos donde lo dejamos!</p></div>

        <!-- LECCI√ìN 6 (FOR) RECONSTRUIDA -->
        <div class="cell">
            <h2>6. Bucles `for`: Repitiendo Tareas Sobre una Lista</h2>
            <p>Un bucle <b>`for`</b> es ideal para recorrer una lista y hacer algo con cada uno de sus elementos.</p>
        </div>
        <div class="cell code-cell">
            <textarea id="code-1">planetas = ["Mercurio", "Venus", "Tierra", "Marte"]

for planeta in planetas:
    print("¬°Hola,", planeta, "!")</textarea>
            <button class="run-button" onclick="runCode(1)">‚ñ∂Ô∏è Ejecutar</button>
            <div class="output" id="output-1"></div>
        </div>
        <div class="cell explanation-cell">
            <h3>üîç Desglose del C√≥digo (Paso a Paso)</h3>
            <ol>
                <li><code><b>planetas = [...]</b></code>: Primero, definimos la lista sobre la que vamos a trabajar.</li>
                <li><code><b>for planeta in planetas:</b></code>: Aqu√≠ empieza la magia. Esta l√≠nea le dice a Python: "Para cada elemento en la lista <code>planetas</code>, haz lo siguiente:".</li>
                <li>En la primera repetici√≥n, la variable temporal <code>planeta</code> tomar√° el valor "Mercurio".</li>
                <li>En la segunda, <code>planeta</code> valdr√° "Venus", y as√≠ sucesivamente.</li>
                <li><code><b>print(...)</b></code>: Este es el "cuerpo" del bucle. Todo lo que est√© aqu√≠ (con un espacio a la izquierda) se ejecutar√° en cada repetici√≥n. Como <code>planeta</code> cambia de valor cada vez, el mensaje que se imprime tambi√©n cambia.</li>
            </ol>
        </div>
        <div class="cell">
            <h3>üéØ Mini reto 1: El Contador de Vocales</h3>
            <p>Recorre el siguiente texto. Para cada letra, comprueba si es una vocal y, si lo es, aumenta el contador. ¬°Es un reto que combina bucles e <code>if</code>!</p>
        </div>
        <div class="cell code-cell">
            <textarea id="code-2">frase = "aprender python es divertido"
contador_vocales = 0
vocales = "aeiou"

for letra in frase:
    if letra in vocales:
        contador_vocales = contador_vocales + 1

print("La frase tiene", contador_vocales, "vocales.")</textarea>
            <button class="run-button" onclick="runCode(2)">‚ñ∂Ô∏è Ejecutar</button>
            <div class="output" id="output-2"></div>
        </div>

        <!-- LECCI√ìN 7 (WHILE) NUEVA -->
        <div class="cell">
            <h2>7. Bucles `while`: Repetir Mientras se Cumpla una Condici√≥n</h2>
            <p>El bucle <b>`while`</b> ("mientras") es diferente. No recorre una lista, sino que ejecuta un bloque de c√≥digo una y otra vez <b>mientras</b> una condici√≥n sea <code>True</code>.</p>
            <p>Es crucial que dentro del bucle algo cambie para que, eventualmente, la condici√≥n se vuelva <code>False</code>. De lo contrario, ¬°crear√≠as un bucle infinito!</p>
        </div>
        <div class="cell code-cell">
            <textarea id="code-3"># Simulaci√≥n de una cuenta atr√°s para un cohete
contador = 5

while contador > 0:
    print(contador, "...")
    # ¬°La l√≠nea m√°s importante! Hacemos que la condici√≥n cambie.
    contador = contador - 1

print("¬°Despegue!")</textarea>
            <button class="run-button" onclick="runCode(3)">‚ñ∂Ô∏è Ejecutar</button>
            <div class="output" id="output-3"></div>
        </div>
        <div class="cell explanation-cell">
            <h3>üîç Desglose del C√≥digo (Paso a Paso)</h3>
            <ol>
                <li><code><b>contador = 5</b></code>: Creamos una variable de control. Empezamos en 5.</li>
                <li><code><b>while contador > 0:</b></code>: Esta es la condici√≥n. Python la revisa: ¬øEs 5 mayor que 0? S√≠ (<code>True</code>), as√≠ que entra en el bucle.</li>
                <li><code><b>print(contador, "...")</b></code>: Se ejecuta el cuerpo, imprimiendo "5 ...".</li>
                <li><code><b>contador = contador - 1</b></code>: ¬°La clave! Actualizamos nuestra variable de control. <code>contador</code> ahora vale 4.</li>
                <li>El bucle termina y Python vuelve a revisar la condici√≥n: ¬øEs 4 mayor que 0? S√≠... y as√≠ contin√∫a hasta que <code>contador</code> vale 0. En ese momento, la condici√≥n (0 > 0) es <code>False</code>, el bucle se detiene y el programa sigue con la l√≠nea "¬°Despegue!".</li>
            </ol>
        </div>
        <div class="cell">
            <h3>üéØ Mini reto 2: Adivina el N√∫mero</h3>
            <p>Es un juego cl√°sico. El programa ha "pensado" un n√∫mero secreto. Usa un bucle `while` para que el jugador siga intentando adivinarlo. El bucle debe continuar mientras el intento del jugador sea <b>diferente</b> al n√∫mero secreto.</p>
        </div>
        <div class="cell code-cell">
            <textarea id="code-4">numero_secreto = 7
intento = 0 # Empezamos con un valor que no sea el secreto

# Mientras el intento sea diferente del n√∫mero secreto...
while intento != numero_secreto:
    # En un programa real, aqu√≠ le pedir√≠amos el n√∫mero al usuario.
    # Por ahora, lo simulamos aumentando el intento en 1.
    print("Intento con el n√∫mero:", intento)
    intento = intento + 1
    
print("¬°Lo has adivinado! El n√∫mero era", numero_secreto)</textarea>
            <button class="run-button" onclick="runCode(4)">‚ñ∂Ô∏è Ejecutar</button>
            <div class="output" id="output-4"></div>
        </div>
    </div>

    <script>
        let pyodide;
        const editors = {};
        const totalCodeCells = 4; // Actualizado al nuevo n√∫mero de celdas
        const codeMirrorThemes = { light: 'default', dark: 'dracula', retro: 'dracula' };
        
        async function main() {
            pyodide = await loadPyodide();
            document.getElementById('loading-message').style.display = 'none';
            document.getElementById('content').style.display = 'block';
            const savedTheme = localStorage.getItem('userTheme') || 'light';
            setTheme(savedTheme);
            for (let i = 1; i <= totalCodeCells; i++) { initializeEditor(i); }
        }
        function initializeEditor(id) {
            const textArea = document.getElementById(`code-${id}`);
            const savedCode = localStorage.getItem(`code-content-${id}`);
            if (savedCode) { textArea.value = savedCode; }
            editors[id] = CodeMirror.fromTextArea(textArea, {
                mode: 'python', lineNumbers: true, indentUnit: 4,
                theme: codeMirrorThemes[localStorage.getItem('userTheme') || 'light']
            });
            editors[id].on('change', (editor) => {
                localStorage.setItem(`code-content-${id}`, editor.getValue());
            });
        }
        function setTheme(themeName) {
            document.documentElement.setAttribute('data-theme', themeName);
            localStorage.setItem('userTheme', themeName);
            const cmTheme = codeMirrorThemes[themeName];
            for (const id in editors) { editors[id].setOption('theme', cmTheme); }
        }
        async function runCode(id) {
            const outputElement = document.getElementById(`output-${id}`);
            const code = editors[id].getValue();
            outputElement.innerText = "Ejecutando...";
            try {
                pyodide.setStdout({ batched: (msg) => { outputElement.innerText = (outputElement.innerText === "Ejecutando..." ? "" : outputElement.innerText) + msg + "\n"; }});
                pyodide.setStderr({ batched: (msg) => { outputElement.innerText = (outputElement.innerText === "Ejecutando..." ? "" : outputElement.innerText) + msg + "\n"; }});
                outputElement.innerText = "";
                const pyodideGlobals = pyodide.globals.get("dict")();
                await pyodide.runPythonAsync(code, { globals: pyodideGlobals });
                if (outputElement.innerText.trim() === "") { outputElement.innerText = "‚úÖ Ejecutado con √©xito (sin salida de texto)"; }
                pyodideGlobals.destroy();
            } catch (err) {
                outputElement.innerText = err;
            }
        }
        main();
    </script>
</body>
</html>
