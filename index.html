<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Curso Python Interactivo</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/dracula.min.css">

    <style>
        :root { --bg-color: #f9f9f9; --text-color: #333; --cell-bg-color: white; --cell-border-color: #e0e0e0; --header-border-color: #eaecef; --code-bg-color: #eee; --output-bg-color: #f0f0f0; --output-border-color: #ddd; --button-bg-color: #2c8a30; --button-hover-bg-color: #45a049; --explanation-bg: #f8f9fa; --explanation-border: #4CAF50; }
        [data-theme="dark"] { --bg-color: #121212; --text-color: #e0e0e0; --cell-bg-color: #1e1e1e; --cell-border-color: #333; --header-border-color: #333; --code-bg-color: #333; --output-bg-color: #2a2a2a; --output-border-color: #444; --button-bg-color: #3e8e41; --button-hover-bg-color: #50b154; --explanation-bg: #2c2c2c; }
        [data-theme="retro"] { --bg-color: #000000; --text-color: #00ff00; --cell-bg-color: #0d0d0d; --cell-border-color: #00ff00; --header-border-color: #00ff00; --code-bg-color: #1a1a1a; --output-bg-color: #111; --output-border-color: #008f00; --button-bg-color: #008f00; --button-hover-bg-color: #00ff00; --explanation-bg: #032d03; }
        html { scroll-padding-top: 80px; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; line-height: 1.6; color: var(--text-color); background-color: var(--bg-color); max-width: 800px; margin: 20px auto; padding: 20px 15px; }
        .top-nav { position: sticky; top: 0; background-color: var(--cell-bg-color); padding: 10px; border: 1px solid var(--cell-border-color); border-radius: 8px; margin-bottom: 20px; z-index: 100; display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
        .top-nav a { text-decoration: none; color: var(--text-color); background-color: var(--code-bg-color); padding: 5px 10px; border-radius: 5px; }
        .cell { background-color: var(--cell-bg-color); border: 1px solid var(--cell-border-color); border-radius: 8px; margin-bottom: 20px; padding: 15px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .explanation-cell { background-color: var(--explanation-bg); border-left: 4px solid var(--explanation-border); padding: 10px 20px; }
        h1, h2, h3 { border-bottom: 1px solid var(--header-border-color); padding-bottom: 0.3em; }
        .run-button { color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; background-color: var(--button-bg-color); padding: 8px 15px; margin-bottom: 10px; }
        .output { background-color: var(--output-bg-color); padding: 10px; border-radius: 5px; white-space: pre-wrap; font-family: "Courier New", Courier, monospace; min-height: 20px; margin-top: 10px; border: 1px solid var(--output-border-color); }
        code { background-color: var(--code-bg-color); color: var(--text-color); padding: 2px 4px; border-radius: 3px; }
    </style>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/python/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>
</head>
<body>
    <nav class="top-nav">
        <a href="#leccion-1">1. Variables</a>
        <a href="#leccion-4">4. Listas</a>
        <a href="#leccion-7">7. Funciones</a>
        <a href="#leccion-8">8. Diccionarios</a>
        <a href="#leccion-9">9. Combinar</a>
    </nav>
    
    <div class="cell"><h1>Mini curso: Fundamentos de Programaci√≥n</h1></div>
    <div id="loading-message"><p>‚è≥ Cargando el entorno interactivo de Python...</p></div>

    <div id="content" style="display:none;">
        <div class="cell"><h2 id="leccion-1">1-6. Fundamentos</h2><p>Estas lecciones cubren los tipos de datos, operadores, condicionales y bucles.</p></div>
        <div class="cell"><h2 id="leccion-7">7. Funciones (`def`)</h2><p>Permiten crear bloques de c√≥digo reutilizables para no repetirnos.</p></div>
        <div class="cell"><h2 id="leccion-8">8. Diccionarios</h2><p>Son colecciones para guardar datos con pares <code>clave: valor</code>. Se crean con <code>{}</code>.</p></div>
        
        <!-- INICIO DE LA NUEVA LECCI√ìN -->
        <div class="cell">
            <h2 id="leccion-9">9. ¬°Combinando Listas y Diccionarios!</h2>
            <p>Este es uno de los conceptos m√°s importantes. En programas reales, los datos rara vez son simples. A menudo, tendr√°s una <b>lista de diccionarios</b>.</p>
            <p>Imagina una lista de usuarios. Cada usuario es un diccionario con sus propios datos.</p>
        </div>
        <div class="cell code-cell">
            <textarea id="code-1"># Una lista donde cada elemento es un diccionario
usuarios = [
    { "id": 1, "nombre": "Ana", "edad": 28 },
    { "id": 2, "nombre": "Carlos", "edad": 45 },
    { "id": 3, "nombre": "Beatriz", "edad": 22 }
]

# Acceder al nombre del segundo usuario (√≠ndice 1)
nombre_carlos = usuarios[1]["nombre"]
print("El segundo usuario es:", nombre_carlos)

# Recorrer la lista para encontrar a todos los mayores de 25
print("\nBuscando usuarios mayores de 25 a√±os:")
for usuario in usuarios:
    # 'usuario' es un diccionario en cada repetici√≥n
    if usuario["edad"] > 25:
        print("-", usuario["nombre"], "tiene", usuario["edad"], "a√±os.")
</textarea>
            <button class="run-button" onclick="runCode(1)">‚ñ∂Ô∏è Ejecutar</button>
            <div class="output" id="output-1"></div>
        </div>
        <div class="cell explanation-cell">
            <h3>üîç Desglose del C√≥digo</h3>
            <ol>
                <li><code><b>usuarios = [ ... ]</b></code>: Creamos una lista normal con corchetes <code>[]</code>. La √∫nica diferencia es que cada elemento que ponemos dentro es un diccionario completo <code>{...}</code>.</li>
                <li><code><b>usuarios[1]["nombre"]</b></code>: ¬°Esta es la sintaxis clave! La desglosamos de izquierda a derecha:
                    <ul>
                        <li><code>usuarios[1]</code>: Primero, accedemos al segundo elemento de la lista. Esto nos devuelve el diccionario entero: <code>{ "id": 2, "nombre": "Carlos", "edad": 45 }</code>.</li>
                        <li><code><b>...["nombre"]</b></code>: Sobre ese diccionario que hemos obtenido, ahora accedemos al valor asociado a la clave <code>"nombre"</code>. El resultado es "Carlos".</li>
                    </ul>
                </li>
                <li><code><b>for usuario in usuarios:</b></code>: Al recorrer la lista, la variable temporal <code>usuario</code> contendr√° un diccionario completo en cada pasada. Por eso, dentro del bucle, podemos usar <code>usuario["edad"]</code> y <code>usuario["nombre"]</code> para acceder a sus datos.</li>
            </ol>
        </div>
        <div class="cell">
            <h3>üéØ Mini reto: Inventario de una Tienda</h3>
            <p>Has sido contratado para gestionar el inventario de una tienda de videojuegos. Crea una lista de diccionarios llamada <code>inventario</code>.</p>
            <p>Cada diccionario debe representar un producto y tener las claves: <code>"titulo"</code> (texto), <code>"precio"</code> (n√∫mero) y <code>"stock"</code> (n√∫mero de unidades).</p>
            <p>Luego, recorre el inventario con un bucle e imprime solo los t√≠tulos de los juegos que cuesten <b>menos de 30</b>.</p>
        </div>
        <div class="cell code-cell">
            <textarea id="code-2"># Crea tu lista de diccionarios aqu√≠
inventario = [
    { "titulo": "Aventura Espacial", "precio": 49.99, "stock": 15 },
    { "titulo": "Puzles de la Jungla", "precio": 19.95, "stock": 30 },
    { "titulo": "Carreras Urbanas", "precio": 25.50, "stock": 5 }
]

print("Juegos en oferta (menos de 30‚Ç¨):")
# Recorre el inventario con un bucle
for juego in inventario:
    # Dentro del bucle, comprueba el precio del juego
    if juego["precio"] < 30:
        # Si cumple la condici√≥n, imprime su t√≠tulo
        print("-", juego["titulo"])
</textarea>
            <button class="run-button" onclick="runCode(2)">‚ñ∂Ô∏è Ejecutar</button>
            <div class="output" id="output-2"></div>
        </div>
    </div>

    <script>
        let pyodide;
        const editors = {};
        const totalCodeCells = 2; // Actualizado para esta secci√≥n
        const codeMirrorThemes = { light: 'default', dark: 'dracula', retro: 'dracula' };
        
        // El script de JS se mantiene igual
        async function main() {
            pyodide = await loadPyodide();
            document.getElementById('loading-message').style.display = 'none';
            document.getElementById('content').style.display = 'block';
            const savedTheme = localStorage.getItem('userTheme') || 'light';
            setTheme(savedTheme);
            for (let i = 1; i <= totalCodeCells; i++) { initializeEditor(i); }
        }
        function initializeEditor(id) {
            const textArea = document.getElementById(`code-${id}`);
            const savedCode = localStorage.getItem(`code-content-${id}`);
            if (savedCode) { textArea.value = savedCode; }
            editors[id] = CodeMirror.fromTextArea(textArea, {
                mode: 'python', lineNumbers: true, indentUnit: 4,
                theme: codeMirrorThemes[localStorage.getItem('userTheme') || 'light']
            });
            editors[id].on('change', (editor) => {
                localStorage.setItem(`code-content-${id}`, editor.getValue());
            });
        }
        function setTheme(themeName) {
            document.documentElement.setAttribute('data-theme', themeName);
            localStorage.setItem('userTheme', themeName);
            const cmTheme = codeMirrorThemes[themeName];
            for (const id in editors) { editors[id].setOption('theme', cmTheme); }
        }
        async function runCode(id) {
            const outputElement = document.getElementById(`output-${id}`);
            const code = editors[id].getValue();
            outputElement.innerText = "Ejecutando...";
            try {
                pyodide.setStdout({ batched: (msg) => { outputElement.innerText = (outputElement.innerText === "Ejecutando..." ? "" : outputElement.innerText) + msg + "\n"; }});
                pyodide.setStderr({ batched: (msg) => { outputElement.innerText = (outputElement.innerText === "Ejecutando..." ? "" : outputElement.innerText) + msg + "\n"; }});
                outputElement.innerText = "";
                const pyodideGlobals = pyodide.globals.get("dict")();
                await pyodide.runPythonAsync(code, { globals: pyodideGlobals });
                if (outputElement.innerText.trim() === "") { outputElement.innerText = "‚úÖ Ejecutado con √©xito (sin salida de texto)"; }
                pyodideGlobals.destroy();
            } catch (err) {
                outputElement.innerText = err;
            }
        }
        // Colaps√© las lecciones anteriores en el HTML.
        // Un peque√±o hack para que el guardado de celdas antiguas no se pierda.
        function hackyInitializeOldCells() {
            const oldCellIds = [1,2,3,4,5,6,7,8];
            for(const id of oldCellIds) { if(localStorage.getItem(`code-content-${id}`)){/*noop*/} }
        }
        hackyInitializeOldCells();
        main();
    </script>
</body>
</html>
