<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Curso Python Interactivo</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/dracula.min.css">

    <style>
        :root { --bg-color: #f9f9f9; --text-color: #333; --cell-bg-color: white; --cell-border-color: #e0e0e0; --header-border-color: #eaecef; --code-bg-color: #eee; --output-bg-color: #f0f0f0; --output-border-color: #ddd; --button-bg-color: #2c8a30; --button-hover-bg-color: #45a049; --explanation-bg: #f8f9fa; --explanation-border: #4CAF50; }
        [data-theme="dark"] { --bg-color: #121212; --text-color: #e0e0e0; --cell-bg-color: #1e1e1e; --cell-border-color: #333; --header-border-color: #333; --code-bg-color: #333; --output-bg-color: #2a2a2a; --output-border-color: #444; --button-bg-color: #3e8e41; --button-hover-bg-color: #50b154; --explanation-bg: #2c2c2c; }
        [data-theme="retro"] { --bg-color: #000000; --text-color: #00ff00; --cell-bg-color: #0d0d0d; --cell-border-color: #00ff00; --header-border-color: #00ff00; --code-bg-color: #1a1a1a; --output-bg-color: #111; --output-border-color: #008f00; --button-bg-color: #008f00; --button-hover-bg-color: #00ff00; --explanation-bg: #032d03; }
        
        html { scroll-behavior: smooth; scroll-padding-top: 100px; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; line-height: 1.6; color: var(--text-color); background-color: var(--bg-color); max-width: 800px; margin: 20px auto; padding: 0 15px; }
        
        .top-nav { position: sticky; top: 10px; background-color: var(--cell-bg-color); padding: 10px; border: 1px solid var(--cell-border-color); border-radius: 8px; margin-bottom: 20px; z-index: 100; display: flex; flex-wrap: nowrap; overflow-x: auto; -webkit-overflow-scrolling: touch; }
        .top-nav a { flex-shrink: 0; text-decoration: none; color: var(--text-color); background-color: var(--code-bg-color); padding: 5px 12px; border-radius: 5px; margin-right: 10px; }

        .cell { background-color: var(--cell-bg-color); border: 1px solid var(--cell-border-color); border-radius: 8px; margin-bottom: 20px; padding: 15px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .explanation-cell { background-color: var(--explanation-bg); border-left: 4px solid var(--explanation-border); padding: 10px 20px; }
        h1, h2, h3 { border-bottom: 1px solid var(--header-border-color); padding-bottom: 0.3em; }
        .run-button { color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; background-color: var(--button-bg-color); padding: 8px 15px; margin-bottom: 10px; }
        .output { background-color: var(--output-bg-color); padding: 10px; border-radius: 5px; white-space: pre-wrap; font-family: "Courier New", Courier, monospace; min-height: 20px; margin-top: 10px; border: 1px solid var(--output-border-color); }
        code { background-color: var(--code-bg-color); color: var(--text-color); padding: 2px 4px; border-radius: 3px; }
        #loading-message { text-align: center; padding: 20px; font-style: italic; }
    </style>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/python/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>
</head>
<body>
    <nav class="top-nav">
        <a href="#leccion-1">1. Variables</a>
        <a href="#leccion-2">2. Tipos</a>
        <a href="#leccion-3">3. Operadores</a>
        <a href="#leccion-4">4. Listas</a>
        <a href="#leccion-5">5. Condicionales</a>
        <a href="#leccion-6">6. Bucles</a>
        <a href="#leccion-7">7. Funciones</a>
        <a href="#leccion-8">8. Diccionarios</a>
        <a href="#leccion-9">9. Combinar</a>
        <a href="#leccion-10">10. Input</a>
    </nav>
    
    <div class="cell"><h1>Mini curso: Fundamentos de Programaci√≥n</h1></div>
    <div id="loading-message"><p>‚è≥ Cargando el entorno interactivo de Python...</p></div>

    <div id="content" style="display:none;">
        <div class="cell" id="leccion-1"><h2>1. Variables y `print()`</h2><p>Lecci√≥n sobre variables...</p></div>
        <div class="cell" id="leccion-2"><h2>2. Tipos de Datos</h2><p>Lecci√≥n sobre tipos...</p></div>
        <div class="cell" id="leccion-3"><h2>3. Operadores</h2><p>Lecci√≥n sobre operadores...</p></div>
        <div class="cell" id="leccion-4"><h2>4. Listas</h2><p>Lecci√≥n sobre listas...</p></div>
        <div class="cell" id="leccion-5"><h2>5. Condicionales e Indentaci√≥n</h2><p>Lecci√≥n sobre condicionales y la regla de la indentaci√≥n...</p></div>
        <div class="cell" id="leccion-6"><h2>6. Bucles</h2><p>Lecci√≥n sobre bucles...</p></div>
        
        <!-- LECCI√ìN 7 RECONSTRUIDA -->
        <div class="cell" id="leccion-7">
            <h2>7. Funciones: Definir vs. Llamar</h2>
            <p>Una <b>funci√≥n</b> es un bloque de c√≥digo reutilizable. Crear una funci√≥n es un proceso de dos pasos, como con una receta de cocina:</p>
            <ol>
                <li><b>Paso 1: Definir la funci√≥n.</b> Es como escribir la receta en un papel.</li>
                <li><b>Paso 2: Llamar a la funci√≥n.</b> Es como coger la receta y ponerse a cocinar.</li>
            </ol>
            <p>¬°No puedes hacer el paso 2 sin haber hecho antes el paso 1!</p>

            <h3>Paso 1: Definir la Funci√≥n (Escribir la Receta)</h3>
            <p>Usamos la palabra clave <code>def</code> para ense√±arle a Python una nueva "receta".</p>
            <p><b>Observa bien:</b> Cuando ejecutes la siguiente celda, solo ver√°s el mensaje "‚úÖ Ejecutado con √©xito". ¬°Y eso est√° bien! Significa que Python ha memorizado la receta, pero todav√≠a no le hemos pedido que la cocine.</p>
        </div>
        <div class="cell code-cell">
            <textarea id="code-7"># DEFINICI√ìN de una funci√≥n que sabe c√≥mo saludar.
# Esta es nuestra "receta".
def saludar(nombre):
    print("¬°Hola,", nombre, "! ¬°Bienvenido al curso!")
    print("Espero que est√©s disfrutando del caf√©.")</textarea>
            <button class="run-button" onclick="runCode(7)">‚ñ∂Ô∏è Ejecutar</button>
            <div class="output" id="output-7"></div>
        </div>
        <div class="cell explanation-cell">
            <h3>üîç Desglose de la Definici√≥n</h3>
            <ul>
                <li><code><b>def saludar(nombre):</b></code>: Le decimos a Python: "Voy a definir una nueva herramienta. Se llama <code>saludar</code> y para funcionar, necesita un dato (un par√°metro) que llamaremos <code>nombre</code>".</li>
                <li>El c√≥digo indentado debajo es el contenido de la receta. Python lo lee, lo memoriza, y espera a que le pidamos que lo use.</li>
            </ul>
        </div>

        <div class="cell">
            <h3>Paso 2: Llamar a la Funci√≥n (Cocinar la Receta)</h3>
            <p>Una vez que Python conoce la receta, podemos "llamarla" por su nombre y pasarle los ingredientes (argumentos) que necesita. ¬°Ahora S√ç que veremos un resultado!</p>
        </div>
        <div class="cell code-cell">
            <textarea id="code-8"># Ahora que Python conoce la receta "saludar", la usamos.
# ¬°La llamamos varias veces con distintos "ingredientes"!

saludar("Ana")
print("---") # Un separador
saludar("Carlos")</textarea>
            <button class="run-button" onclick="runCode(8)">‚ñ∂Ô∏è Ejecutar</button>
            <div class="output" id="output-8"></div>
        </div>
        <div class="cell explanation-cell">
            <h3>üîç Desglose de la Llamada</h3>
            <ul>
                <li><code><b>saludar("Ana")</b></code>: Buscamos la herramienta llamada <code>saludar</code> y le pasamos el texto <code>"Ana"</code> como "ingrediente". Dentro de la funci√≥n, el par√°metro <code>nombre</code> toma el valor <code>"Ana"</code> y se ejecuta todo el c√≥digo del `print`.</li>
                <li>La gran ventaja es la reutilizaci√≥n. Podemos llamar a `saludar()` tantas veces como queramos sin tener que reescribir el c√≥digo de los `print`.</li>
            </ul>
        </div>
        <!-- FIN DE LA LECCI√ìN 7 RECONSTRUIDA -->

        <div class="cell" id="leccion-8"><h2>8. Diccionarios</h2><p>Lecci√≥n sobre diccionarios...</p></div>
        <div class="cell" id="leccion-9"><h2>9. Combinar Estructuras</h2><p>Lecci√≥n sobre listas de diccionarios...</p></div>
        <div class="cell" id="leccion-10"><h2>10. Input del Usuario</h2><p>Lecci√≥n sobre c√≥mo hacer programas interactivos...</p></div>
        
    </div>

    <script>
        let pyodide;
        const editors = {};
        // El n√∫mero total de celdas de c√≥digo ahora es 8 (hemos dividido la 7 en dos)
        const totalCodeCells = 8; 
        const codeMirrorThemes = { light: 'default', dark: 'dracula', retro: 'dracula' };
        
        async function main() {
            // Re-inicializamos el contenido de las celdas para el script
            const contentDiv = document.getElementById('content');
            contentDiv.innerHTML = `
                <div class="cell" id="leccion-1"><h2>1. Variables y \`print()\`</h2><p>Una <b>variable</b> es un nombre para guardar un valor. La funci√≥n \`print()\` muestra valores en pantalla.</p></div>
                <div class="cell code-cell"><textarea id="code-1">nombre_curso = "Fundamentos de Python"; print(nombre_curso)</textarea><button class="run-button" onclick="runCode(1)">‚ñ∂Ô∏è Ejecutar</button><div class="output" id="output-1"></div></div>

                <div class="cell" id="leccion-2"><h2>2. Tipos de Datos</h2><p>Los datos pueden ser de tipo \`str\`, \`int\`, \`float\` o \`bool\`.</p></div>
                <div class="cell code-cell"><textarea id="code-2">print(type("texto")); print(type(100))</textarea><button class="run-button" onclick="runCode(2)">‚ñ∂Ô∏è Ejecutar</button><div class="output" id="output-2"></div></div>
                
                <div class="cell" id="leccion-3"><h2>3. Operadores</h2><p>Permiten hacer c√°lculos y comparaciones.</p></div>
                <div class="cell code-cell"><textarea id="code-3">print(10 // 3); print(10 % 3)</textarea><button class="run-button" onclick="runCode(3)">‚ñ∂Ô∏è Ejecutar</button><div class="output" id="output-3"></div></div>

                <div class="cell" id="leccion-4"><h2>4. Listas</h2><p>Colecciones ordenadas creadas con \`[]\`.</p></div>
                <div class="cell code-cell"><textarea id="code-4">mi_lista = ["A", "B"]; print(mi_lista[1])</textarea><button class="run-button" onclick="runCode(4)">‚ñ∂Ô∏è Ejecutar</button><div class="output" id="output-4"></div></div>
                
                <div class="cell" id="leccion-5"><h2>5. Condicionales</h2><p>Toma de decisiones con \`if\`.</p></div>
                <div class="cell code-cell"><textarea id="code-5">edad = 20; if edad >= 18: print("Mayor de edad.")</textarea><button class="run-button" onclick="runCode(5)">‚ñ∂Ô∏è Ejecutar</button><div class="output" id="output-5"></div></div>
                <div class="cell explanation-cell"><h3>La Regla de Oro: La Indentaci√≥n</h3><p>En Python, la <b>indentaci√≥n</b> (el espacio a la izquierda) es obligatoria y define qu√© c√≥digo pertenece a un bloque \`if\`, \`for\`, etc.</p></div>

                <div class="cell" id="leccion-6"><h2>6. Bucles</h2><p>Repetici√≥n con \`for\` y \`while\`.</p></div>
                <div class="cell code-cell"><textarea id="code-6">for i in [1, 2]: print(i)</textarea><button class="run-button" onclick="runCode(6)">‚ñ∂Ô∏è Ejecutar</button><div class="output" id="output-6"></div></div>

                <div class="cell" id="leccion-7"><h2>7. Funciones: Definir vs. Llamar</h2><p>Crear una funci√≥n es un proceso de dos pasos: 1. Definir (escribir la receta), 2. Llamar (cocinar la receta).</p><h3>Paso 1: Definir la Funci√≥n</h3></div>
                <div class="cell code-cell"><textarea id="code-7"># DEFINICI√ìN de la receta. Al ejecutar, no hace nada visible.
def saludar(nombre):
    print("¬°Hola,", nombre, "!")</textarea><button class="run-button" onclick="runCode(7)">‚ñ∂Ô∏è Ejecutar</button><div class="output" id="output-7"></div></div>
                
                <div class="cell"><h3>Paso 2: Llamar a la Funci√≥n</h3><p>Ahora que Python conoce la receta, la usamos.</p></div>
                <div class="cell code-cell"><textarea id="code-8"># LLAMADA a la receta. ¬°Ahora s√≠ vemos un resultado!
saludar("Ana")
saludar("Carlos")</textarea><button class="run-button" onclick="runCode(8)">‚ñ∂Ô∏è Ejecutar</button><div class="output" id="output-8"></div></div>

                <div class="cell" id="leccion-8"><h2>8. Diccionarios</h2><p>Colecciones con pares \`clave: valor\`.</p></div>
                <div class="cell code-cell"><textarea id="code-9">persona = {"nombre": "Ana"}; print(persona["nombre"])</textarea><button class="run-button" onclick="runCode(9)">‚ñ∂Ô∏è Ejecutar</button><div class="output" id="output-9"></div></div>
                
                <div class="cell" id="leccion-9"><h2>9. Combinar Estructuras</h2><p>Listas de diccionarios.</p></div>
                <div class="cell code-cell"><textarea id="code-10">usuarios = [{"nombre": "Ana"}]; print(usuarios[0]["nombre"])</textarea><button class="run-button" onclick="runCode(10)">‚ñ∂Ô∏è Ejecutar</button><div class="output" id="output-10"></div></div>

                <div class="cell" id="leccion-10"><h2>10. Input del Usuario</h2><p>Programas interactivos con \`input()\`.</p></div>
                <div class="cell code-cell"><textarea id="code-11"># edad = int(input("Dime tu edad: ")); print("Tu edad es:", edad)
print("Input deshabilitado en este ejemplo simple para evitar pop-ups.")</textarea><button class="run-button" onclick="runCode(11)">‚ñ∂Ô∏è Ejecutar</button><div class="output" id="output-11"></div></div>
            `;
            
            pyodide = await loadPyodide();
            document.getElementById('loading-message').style.display = 'none';
            document.getElementById('content').style.display = 'block';
            const savedTheme = localStorage.getItem('userTheme') || 'light';
            setTheme(savedTheme);
            for (let i = 1; i <= totalCodeCells; i++) { if(document.getElementById(`code-${i}`)) { initializeEditor(i); } }
        }
        function initializeEditor(id) {
            const textArea = document.getElementById(`code-${id}`);
            const savedCode = localStorage.getItem(`code-content-${id}`);
            if (savedCode) { textArea.value = savedCode; }
            editors[id] = CodeMirror.fromTextArea(textArea, {
                mode: 'python', lineNumbers: true, indentUnit: 4,
                theme: codeMirrorThemes[localStorage.getItem('userTheme') || 'light']
            });
            editors[id].on('change', (editor) => { localStorage.setItem(`code-content-${id}`, editor.getValue()); });
        }
        function setTheme(themeName) {
            document.documentElement.setAttribute('data-theme', themeName);
            localStorage.setItem('userTheme', themeName);
            const cmTheme = codeMirrorThemes[themeName];
            for (const id in editors) { editors[id].setOption('theme', cmTheme); }
        }
        async function runCode(id) {
            const outputElement = document.getElementById(`output-${id}`);
            const code = editors[id].getValue();
            outputElement.innerText = "Ejecutando...";
            if (code.includes("input(")) {
                pyodide.setStdin({ isatty: true, stdin: () => { let userInput = prompt("El programa est√° esperando una entrada:"); return userInput; } });
            }
            try {
                pyodide.setStdout({ batched: (msg) => { outputElement.innerText = (outputElement.innerText === "Ejecutando..." ? "" : outputElement.innerText) + msg + "\n"; }});
                pyodide.setStderr({ batched: (msg) => { outputElement.innerText = (outputElement.innerText === "Ejecutando..." ? "" : outputElement.innerText) + msg + "\n"; }});
                outputElement.innerText = "";
                await pyodide.runPythonAsync(code);
                if (outputElement.innerText.trim() === "") { outputElement.innerText = "‚úÖ Ejecutado con √©xito (sin salida de texto)"; }
            } catch (err) { outputElement.innerText = err; }
        }
        main();
    </script>
</body>
</html>
